
<!doctype html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><title>Python: module spree.crawler.manager</title>
</head><body bgcolor="#f0f0f8">

<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="heading">
<tr bgcolor="#7799ee">
<td valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial">&nbsp;<br><big><big><strong><a href="spree.html"><font color="#ffffff">spree</font></a>.<a href="spree.crawler.html"><font color="#ffffff">crawler</font></a>.manager</strong></big></big></font></td
><td align=right valign=bottom
><font color="#ffffff" face="helvetica, arial"><a href=".">index</a><br><a href="file:///C|/studium/spree/opensource/spree/crawler/manager.py">c:\studium\spree\opensource\spree\crawler\manager.py</a></font></td></tr></table>
    <p><tt>manager.py<br>
&nbsp;<br>
Crawls&nbsp;web-pages&nbsp;for&nbsp;the&nbsp;registration&nbsp;process<br>
crawling&nbsp;is&nbsp;done&nbsp;as&nbsp;extra&nbsp;process&nbsp;to&nbsp;avoid&nbsp;bottlenecks<br>
&nbsp;<br>
This&nbsp;class&nbsp;uses&nbsp;the&nbsp;database&nbsp;as&nbsp;blackboard&nbsp;(websites&nbsp;table)<br>
the&nbsp;server&nbsp;adds&nbsp;new&nbsp;pages&nbsp;to&nbsp;the&nbsp;db&nbsp;the&nbsp;crawler&nbsp;continously<br>
checks&nbsp;the&nbsp;db&nbsp;for&nbsp;new&nbsp;sites&nbsp;and&nbsp;crawls&nbsp;them&nbsp;writing&nbsp;the&nbsp;results<br>
back&nbsp;to&nbsp;the&nbsp;db<br>
&nbsp;<br>
rw</tt></p>
<p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#aa55cc">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#fffff" face="helvetica, arial"><big><strong>Modules</strong></big></font></td></tr>
    
<tr><td bgcolor="#aa55cc"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><table width="100%" summary="list"><tr><td width="25%" valign=top><a href="sqlalchemy.ansisql.html">sqlalchemy.ansisql</a><br>
<a href="cPickle.html">cPickle</a><br>
<a href="sqlalchemy.databases.html">sqlalchemy.databases</a><br>
<a href="datetime.html">datetime</a><br>
<a href="sqlalchemy.exceptions.html">sqlalchemy.exceptions</a><br>
<a href="sqlalchemy.ext.html">sqlalchemy.ext</a><br>
</td><td width="25%" valign=top><a href="spree.util.text.extractor.html">spree.util.text.extractor</a><br>
<a href="spree.util.crawler.html2text.html">spree.util.crawler.html2text</a><br>
<a href="sqlalchemy.logging.html">sqlalchemy.logging</a><br>
<a href="sqlalchemy.databases.mysql.html">sqlalchemy.databases.mysql</a><br>
<a href="sqlalchemy.orm.html">sqlalchemy.orm</a><br>
<a href="sqlalchemy.pool.html">sqlalchemy.pool</a><br>
</td><td width="25%" valign=top><a href="sqlalchemy.queue.html">sqlalchemy.queue</a><br>
<a href="sqlalchemy.schema.html">sqlalchemy.schema</a><br>
<a href="sqlalchemy.sql.html">sqlalchemy.sql</a><br>
<a href="sqlalchemy.sql_util.html">sqlalchemy.sql_util</a><br>
<a href="threading.html">threading</a><br>
<a href="time.html">time</a><br>
</td><td width="25%" valign=top><a href="sqlalchemy.topological.html">sqlalchemy.topological</a><br>
<a href="sqlalchemy.types.html">sqlalchemy.types</a><br>
<a href="sqlalchemy.util.html">sqlalchemy.util</a><br>
</td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ee77aa">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Classes</strong></big></font></td></tr>
    
<tr><td bgcolor="#ee77aa"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl>
<dt><font face="helvetica, arial"><a href="__builtin__.html#object">__builtin__.object</a>
</font></dt><dd>
<dl>
<dt><font face="helvetica, arial"><a href="spree.crawler.manager.html#WebsiteCrawlManager">WebsiteCrawlManager</a>
</font></dt></dl>
</dd>
<dt><font face="helvetica, arial"><a href="threading.html#Thread">threading.Thread</a>(<a href="threading.html#_Verbose">threading._Verbose</a>)
</font></dt><dd>
<dl>
<dt><font face="helvetica, arial"><a href="spree.crawler.manager.html#Crawler">Crawler</a>
</font></dt></dl>
</dd>
</dl>
 <p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ffc8d8">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#000000" face="helvetica, arial"><a name="Crawler">class <strong>Crawler</strong></a>(<a href="threading.html#Thread">threading.Thread</a>)</font></td></tr>
    
<tr bgcolor="#ffc8d8"><td rowspan=2><tt>&nbsp;&nbsp;&nbsp;</tt></td>
<td colspan=2><tt>The&nbsp;<a href="#Crawler">Crawler</a>&nbsp;class.<br>
&nbsp;<br>
Sites&nbsp;are&nbsp;downloaded&nbsp;in&nbsp;parallel&nbsp;in&nbsp;different&nbsp;threads&nbsp;to&nbsp;avoid&nbsp;locks.<br>
&nbsp;<br>
Use&nbsp;the&nbsp;<a href="#Crawler">Crawler</a>.<a href="#Crawler-newthread">newthread</a>()&nbsp;method&nbsp;for&nbsp;creating&nbsp;a&nbsp;new&nbsp;instance.<br>&nbsp;</tt></td></tr>
<tr><td>&nbsp;</td>
<td width="100%"><dl><dt>Method resolution order:</dt>
<dd><a href="spree.crawler.manager.html#Crawler">Crawler</a></dd>
<dd><a href="threading.html#Thread">threading.Thread</a></dd>
<dd><a href="threading.html#_Verbose">threading._Verbose</a></dd>
<dd><a href="__builtin__.html#object">__builtin__.object</a></dd>
</dl>
<hr>
Methods defined here:<br>
<dl><dt><a name="Crawler-__init__"><strong>__init__</strong></a>(self, site)</dt><dd><tt>#&nbsp;dir&nbsp;-&nbsp;the&nbsp;directory&nbsp;to&nbsp;crawl&nbsp;the&nbsp;sites&nbsp;for</tt></dd></dl>

<dl><dt><a name="Crawler-run"><strong>run</strong></a>(self)</dt><dd><tt>#&nbsp;run&nbsp;the&nbsp;crawler</tt></dd></dl>

<hr>
Static methods defined here:<br>
<dl><dt><a name="Crawler-newthread"><strong>newthread</strong></a>(site)</dt><dd><tt>#&nbsp;create&nbsp;a&nbsp;new&nbsp;crawler</tt></dd></dl>

<hr>
Data and other attributes defined here:<br>
<dl><dt><strong>currently_crawled_sites</strong> = []</dl>

<dl><dt><strong>evnt</strong> = &lt;threading._Event object&gt;</dl>

<dl><dt><strong>lck</strong> = &lt;thread.lock object&gt;</dl>

<dl><dt><strong>maxthreads</strong> = 5</dl>

<dl><dt><strong>processes</strong> = []</dl>

<hr>
Methods inherited from <a href="threading.html#Thread">threading.Thread</a>:<br>
<dl><dt><a name="Crawler-__repr__"><strong>__repr__</strong></a>(self)</dt></dl>

<dl><dt><a name="Crawler-getName"><strong>getName</strong></a>(self)</dt></dl>

<dl><dt><a name="Crawler-isAlive"><strong>isAlive</strong></a>(self)</dt></dl>

<dl><dt><a name="Crawler-isDaemon"><strong>isDaemon</strong></a>(self)</dt></dl>

<dl><dt><a name="Crawler-join"><strong>join</strong></a>(self, timeout<font color="#909090">=None</font>)</dt></dl>

<dl><dt><a name="Crawler-setDaemon"><strong>setDaemon</strong></a>(self, daemonic)</dt></dl>

<dl><dt><a name="Crawler-setName"><strong>setName</strong></a>(self, name)</dt></dl>

<dl><dt><a name="Crawler-start"><strong>start</strong></a>(self)</dt></dl>

<hr>
Data and other attributes inherited from <a href="threading.html#_Verbose">threading._Verbose</a>:<br>
<dl><dt><strong>__dict__</strong> = &lt;dictproxy object&gt;<dd><tt>dictionary&nbsp;for&nbsp;instance&nbsp;variables&nbsp;(if&nbsp;defined)</tt></dl>

<dl><dt><strong>__weakref__</strong> = &lt;attribute '__weakref__' of '_Verbose' objects&gt;<dd><tt>list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;<a href="__builtin__.html#object">object</a>&nbsp;(if&nbsp;defined)</tt></dl>

</td></tr></table> <p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ffc8d8">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#000000" face="helvetica, arial"><a name="WebsiteCrawlManager">class <strong>WebsiteCrawlManager</strong></a>(<a href="__builtin__.html#object">__builtin__.object</a>)</font></td></tr>
    
<tr bgcolor="#ffc8d8"><td rowspan=2><tt>&nbsp;&nbsp;&nbsp;</tt></td>
<td colspan=2><tt>The&nbsp;manager&nbsp;checks&nbsp;the&nbsp;db&nbsp;for&nbsp;new&nbsp;sites&nbsp;and&nbsp;creates&nbsp;new&nbsp;crawl-threads<br>
once&nbsp;a&nbsp;new&nbsp;site&nbsp;arrives.<br>&nbsp;</tt></td></tr>
<tr><td>&nbsp;</td>
<td width="100%">Methods defined here:<br>
<dl><dt><a name="WebsiteCrawlManager-__init__"><strong>__init__</strong></a>(self, connect_string)</dt></dl>

<dl><dt><a name="WebsiteCrawlManager-connect"><strong>connect</strong></a>(self)</dt><dd><tt>connect&nbsp;to&nbsp;db.&nbsp;initializes&nbsp;the&nbsp;tables</tt></dd></dl>

<dl><dt><a name="WebsiteCrawlManager-getNewSites"><strong>getNewSites</strong></a>(self)</dt><dd><tt>look&nbsp;for&nbsp;new&nbsp;sites&nbsp;in&nbsp;db.<br>
&nbsp;<br>
(sites&nbsp;are&nbsp;new&nbsp;if&nbsp;the&nbsp;"crawl"&nbsp;attribute&nbsp;is&nbsp;set&nbsp;to&nbsp;1<br>
and&nbsp;they&nbsp;are&nbsp;not&nbsp;part&nbsp;of&nbsp;the&nbsp;currently&nbsp;crawled&nbsp;sites)</tt></dd></dl>

<dl><dt><a name="WebsiteCrawlManager-run"><strong>run</strong></a>(self)</dt><dd><tt>run&nbsp;forever&nbsp;checking&nbsp;for&nbsp;new&nbsp;sites&nbsp;and&nbsp;creating&nbsp;new&nbsp;download&nbsp;threads&nbsp;<br>
once&nbsp;are&nbsp;found</tt></dd></dl>

<dl><dt><a name="WebsiteCrawlManager-start"><strong>start</strong></a>(self)</dt></dl>

<hr>
Data and other attributes defined here:<br>
<dl><dt><strong>__dict__</strong> = &lt;dictproxy object&gt;<dd><tt>dictionary&nbsp;for&nbsp;instance&nbsp;variables&nbsp;(if&nbsp;defined)</tt></dl>

<dl><dt><strong>__weakref__</strong> = &lt;attribute '__weakref__' of 'WebsiteCrawlManager' objects&gt;<dd><tt>list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;<a href="__builtin__.html#object">object</a>&nbsp;(if&nbsp;defined)</tt></dl>

<dl><dt><strong>connect_string</strong> = None</dl>

</td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#eeaa77">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Functions</strong></big></font></td></tr>
    
<tr><td bgcolor="#eeaa77"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl><dt><a name="-crawlSite"><strong>crawlSite</strong></a>(site)</dt><dd><tt>download&nbsp;the&nbsp;site,&nbsp;extract&nbsp;the&nbsp;text,&nbsp;get&nbsp;keywords,&nbsp;stem,&nbsp;classify<br>
&nbsp;<br>
writes&nbsp;the&nbsp;result&nbsp;for&nbsp;the&nbsp;site&nbsp;back&nbsp;to&nbsp;the&nbsp;db</tt></dd></dl>
 <dl><dt><a name="-updateSite"><strong>updateSite</strong></a>(site, status, path)</dt><dd><tt>update&nbsp;the&nbsp;site&nbsp;with&nbsp;the&nbsp;status&nbsp;and&nbsp;categories</tt></dd></dl>
</td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#55aa55">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Data</strong></big></font></td></tr>
    
<tr><td bgcolor="#55aa55"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><strong>EXT_PASS</strong> = &lt;object object&gt;<br>
<strong>NULLTYPE</strong> = NullTypeEngine()<br>
<strong>classifier</strong> = None<br>
<strong>default_metadata</strong> = DynamicMetaData()<br>
<strong>engine</strong> = None<br>
<strong>website_table</strong> = None</td></tr></table>
</body></html>